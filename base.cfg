[buildout]
extends = versions.cfg
versions = versions
parts =
    manage
    scripts
    xapian
    xapian-bindings
    ipython
    celery
develop = .
eggs = wizfs

[scripts]
recipe = zc.recipe.egg
eggs = zest.releaser

[manage]
recipe = djangorecipe
eggs = ${buildout:eggs}
projectegg = wizfs
settings = settings.base
wsgi = true
wsgi-script = wsgi.py
logfile = ${buildout:directory}/var/log/wsgi.log
extra-paths =
    ${xapian:location}/lib/python

[xapian]
recipe = zc.recipe.cmmi
url = http://oligarchy.co.uk/xapian/1.2.15/xapian-core-1.2.15.tar.gz

[xapian-bindings]
recipe = zc.recipe.cmmi
url = http://oligarchy.co.uk/xapian/1.2.15/xapian-bindings-1.2.15.tar.gz
configure-options = --prefix=${xapian:location}
extra_options =
    PYTHON_LIB=${xapian:location}/lib/python
    XAPIAN_CONFIG=${xapian:location}/bin/xapian-config
    --with-python

[ipython]
recipe = zc.recipe.egg:scripts
eggs = ${buildout:eggs}
       ipython
scripts = ipython

[celery]
recipe = collective.recipe.celery
eggs = ${buildout:eggs}
broker-transport = redis
broker-host = redis://localhost:6379/0
result-backend = redis
result-dburi = redis://localhost:6379/0
imports =
    wizfs.snapshots.tasks
celeryd-logfile = ${buildout:directory}/var/log/celeryd.log
celeryd-log-level = info
celeryd-concurrency = 4
